# Chapter8 고성능 컴퓨터 시스템

# 병렬처리의 개념과 필요성

* 프로세서의 처리속도 - 반도체 소자의 물리적인 특성에 의해 한계을 가짐
  => 그 한계를 극복하게 해주는 기술이 '병렬 처리'
* 병렬 처리 : 다수의 프로세서들을 이용하여 여러 개의 프로그램들 혹은 
  한 프로그램의 분할된 부분들을 분담하여 동시에 처리하는 기술

병렬 처리의 조건
* 작고 저렴하며 고속인 프로세서의 사용들로 하나의 시스템을 구성할 수 있어야 함
  -> 반도체 기술의 발전 -> 집적도 크게 증가 -> 어느 정도 해소
* 한 프로그램을 여러 개의 작은 부분들로 분할 수 있어야 하며, 분할된 부분들을 
  병렬로 처리한 결과가 전체 프로그램을 순차적으로 처리한 경우와 동일한 결과를 
  얻을 수 있어야 함
  -> 문제 분할 : 병렬처리를 위하여 하나의 문제를 여러 개로 나누는 것
     (프로그램 중에서 반드시 순차적으로 처리되어야 하는 것은 병렬 처리가
     근본적으로 어려운 경우가 있다.
     / 균등한 크기로 분할할 수 없는 경우에도 원하는 만큼의 성능 향상을 
     얻기가 힘들다.)
  -> 프로세서간 통신 : 프로세서의 수가 많아지면 통신 선로의 수도 그만큼
     많아져야 하므로 소프트웨어 오버헤드와 하드웨어상의 지연 시간 때문에
     통신에 소모되는 시간이 길어져 시스템 향상에 한계가 생김
  -> 병렬성을 표현할 프로그래밍 언어와 컴파일러 필요

# 병렬처리의 단위

각 프로세서에 분담되는 단위 프로그램의 크기에 따라 다양한 수준의 병렬성 존재 가능
* 작업 단위 병렬성 : 서로 다른 사용자들에 의해 제출된 작업 프로그램들 혹은 한 사용자에
의해 제출된 여러 개의 독립적인 작업 프로그램 단위로 병렬 처리를 수행하는 것
ex) 성적 관리 프로그램 / 실험 데이터 통계 프로그램
* 태스크 단위 병렬성 : 큰 작업 프로그램은 내부적으로 서로 다른 기능을 수행하는 더
  작은 프로그램으로 분리 가능
* 스레드 단위 병렬성 : 여기서 스레드는 동시에 처리될 수 있는 가장 작은 크기의 독립적인
  단위 프로그램
  -> 스레드 단위의 병렬 처리를 멀티 스레딩이라고 부르며, 멀티 코어 프로세서에 의해 처리
     가능
* 명령어 단위 병렬성 : 명령어들이 사용할 데이터 간에 의존 관계가 존재하지 않는다면 여러
  명령어들을 동시에 수행하는 것이 가능

# 병렬컴퓨터의 분류

Flynn의 분류(가장 널리 사용하는 기준)
* 프로세서들이 처리하는 명령어와 데이터의 스트림 수에 따라 디지털 컴퓨터를 네 가지로 분류
  * 스트림 : 하나의 프로세서에 의해 순서대로 처리되는 일련의 명령어들과 데이터들의 흐름
  * 명령어 스트림 : 프로세서에 의하여 실행되기 위해 순서대로 들어오는 명령어 코드들
  * 데이터 스트림 : 명령어들의 실행에 사용되기 위해 프로세서로 순서대로 들어오는 데이터들
* 단일 명령어 스트림 : 단일 데이터 스트림(SISD)
  * 한 번에 한 개씩의 명령어와 데이터를 순서대로 처리하는 단일 프로세서 시스템에 해당
  * 실행 과정은 파이프라이닝되어 있음
* 복수 명령어 스트림 : 복수 데이터 스트림(SIMD)
  * 배열 프로세서라고도 부름
  * 프로세싱 유니트이 동일한 연산을 처리하지만 처리하는 데이터는 모두 다르다.
* 복수 명령어 스트림 : 단일 데이터 스트림(MISD)
  * 서로 다른 명령어를 실행하지만 처리하는 데이터들은 하나의 스트림인 형태
* 복수 명령어 스트림 : 복수 데이터 스트림(MIMD)
  * 서로 다른 명령어들과 데이터들을 처리

MD가 들어가는 구조 즉 SIMD와 MIMD가 병렬 처리 시스템에 해당한다.
SIMD와 MIMD의 근본적인 차이점은 프로세서들의 독립성에 있다. SIMD는
동일한 프로그램을 동기적으로 실행하고 MIMD는 서로 다른 별도의 프로그램을
비동기적으로 실행한다.

기억장치 액세스 모델에 따른 분류
* 균일 기억장치 액세스(Uniform Memory Access: UMA) 모델
  * 프로세서들이 상호연결망에 연결된 기억장치들을 공유하는 형태
  * 간단하지만 경합이 높아지는 문제점 존재
* 불균일 기억장치 액세스(Non-uniform Memory Access) 모델
  * 모든 장치들이 하나의 기억장치를 가지는 분산 공유 기억장치 형태
  * 액세스 시간은 어느 위치의 기억장치를 액세스하는지에 따라 달라짐
    * 지역 기억장치(가장 짧은 시간)
    * 전역 기억장치
    * 원격 기억장치 액세스(가장 긴 시간)
* 무원격 기억장치 액세스(No-Remote Memory Access:NORMA) 모델
  * 원격 기억장치는 액세스할 수 없는 구조
  * 액세스 요구 메세지를 보내고 받는 형태로 수행
  * 각 노드가 별도의 기억장치를 가지고 있기 때문에
    분산 기억장치 시스템이라고도 부름

시스템 구성 방법에 따른 분류
* 대칭적 다중프로세서(Symmetric Multiprocessors:SMP)
  * 완전 공유 구조를 가지는 중형급 시스템
  * 프로세서들이 시스템의 모든 자원들을 공유
  * 모든 프로세서들이 동등한 권한을 가짐
* 대규모 병렬프로세서(Massively Parallel Processors:MPP)
  * SMP와 반대되는 설계 개념 -> 무공유 구조
  * 노드들 간의 통신 : 메세지 전송 방식
* 캐시-일관성 NUMA(Cache-Coherent NUMA: CC-NUMA) 시스템
  * 모든 노드들과 포함된 캐시들과 주기억장치들 간에 데이터
    일관성을 유지함
  * 모든 노드들이 가지고 있는 기억장치들이 전체적으로 하나의
    공통 주소 공간을 가지는 분산 공유 기억장치 시스템으로 구성
    되어야 함
* 분산 시스템(Distributed System)
* 클러스터 컴퓨터(Cluster Computer)
  * 고속 LAN이나 네트워크 스위치에 의해 서로 연결된 PC
    혹은 워크스테이션들의 집합체를 말함
  * 클러스터 자체를 모든 노드들에 포함된 프로세서들과 
    주기억장치 및 디스크들로 구성되는 하나의 큰 시스템으로
    간주하고 사용 가능
  * 한 컴퓨터가 결합이 생기더라도 다른 컴퓨터로 신속하게 
    대체하면 되기 때문에 가용성이 높음

# 다중 프로세서시스템 구조

* MIMD 조직의 다중 프로세서 구조
* 비동기적으로 동작하는 여러 개의 프로세서들과 독립적인 
  액세스가 가능한 여러 개의 기억장치 모듈들로 구성됨
  프로세서들이 기억장치 모듈을 사용하는 방식에 따라 
  * 공유 기억장치 시스템
  * 분산 기억장치 시스템
  으로 분류할 수 있다.
* 공유 기억장치 시스템
  * 주기억장치가 모든 프로세서에 의해 공유되는 구조
  * 장점
    * 별도의 통신 메커니즘이 필요하지 않다.
    * 각 프로세서들이 처리할 작업들을 동적으로 
      균등하게 할당할 수 있기 때문에, 프로세서 이용률을
      극대화할 수 있어서 시스템 효율이 높아짐
  * 단점
    * 프로세서들과 기억장치들 간의 통로 상에 통신량이
      많아지기 때문에 경합으로 인한 지연 시간이 길어짐
    * 두 개 이상의 프로세서들이 공유자원을 동시에 사용하려는
      경우에는 한 개 이외의 프로세서들을 기다려야 한다.
  * 단점을 극복하기 위한 방법이 캐시, 고속 상호연결망 등이다.
  * 상호연결 구조
      * 버스(bus)
        * 가장 간단한 연결 방식
        * 하드웨어가 매우 간단
        * 하나의 버스를 통한 통신 -> 경합 문제
        * 전송속도 높이거나 캐시를 두는 것이 방법
        * 다중-버스 구조 / 계층적 버스 구조가 대안
      * 크로스바 스위치 구조
        * 최대 N개의 기억장치 액세스들이 동시에 수행 가능
        * 두 개 혹은 그 이상의 프로세서들이 동일한 기억장치에
          접근 시 중재를 받아서 순서대로 액세스받아야 함
      * 다단계 상호연결망
        * 크로스바 스위치의 기본 개념을 이용하면서도 하드웨어
          복잡성을 줄여줌
* 분산-기억장치 시스템 구조
  * 각 프로세서가 자신의 기억장치를 별도로 가지고 있는 구조
  * 공유되는 데이터만 서로 교환
  * 메세지 패싱 방식
  * 상호 연결망 구조
    * 선형 배열 구조
      * N개의 노드들이 N-1개의 링크들에 의하여 차례대로 연결
    * 링 구조
    * 트리 구조
    * 매시 구조
    * 하이퍼큐브 구조
    
# 클러스터 컴퓨터 

* 프로세스 이용률을 높이기 위해 병렬 처리 시스템을 사용함으로써
  유휴 사이클을 유용하게 사용하자는 개념
* 기본 구조
  * 다수의 독립적인 컴퓨터들을 상호 연결하여 구성하지만 사용자에게는
  하나의 시스템으로 보이도록 해야 한다는 것
* 분류
  * PC 클러스터
  * 워크스테이션 클러스터
  * 다중프로세서 클러스터
* 단일 시스템 이미지
  * 상호 연결된 컴퓨터가 하나의 통합된 자원으로 사용될 수 있다면 
    그 시스템은 단일 시스템 이미지를 가지고 있다고 말함